<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>N·ªëi Ch·ªØ - Lucky Spin</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #4361ee;
            --secondary: #f72585;
            --success: #4cc9f0;
            --warning: #f8961e;
            --glass: rgba(255, 255, 255, 0.05);
            --border: rgba(255, 255, 255, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background: radial-gradient(circle at center, #1a1a2e 0%, #050510 100%);
            color: #fff;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            padding: 20px;
        }

        .game-header {
            text-align: center;
            padding: 40px 0;
        }

        h1 {
            font-size: 3rem;
            font-weight: 800;
            background: linear-gradient(135deg, #4cc9f0, #4361ee, #f72585);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .chat-container {
            flex: 1;
            max-width: 600px;
            width: 100%;
            margin: 0 auto;
            background: var(--glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border);
            border-radius: 24px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        }

        .messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .message {
            max-width: 80%;
            padding: 12px 20px;
            border-radius: 18px;
            font-size: 1.1rem;
            font-weight: 600;
            position: relative;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.ai {
            align-self: flex-start;
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            border-bottom-left-radius: 4px;
        }

        .message.user {
            align-self: flex-end;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: #fff;
            border-bottom-right-radius: 4px;
        }

        .input-area {
            padding: 20px;
            background: rgba(0, 0, 0, 0.2);
            border-top: 1px solid var(--border);
            display: flex;
            gap: 10px;
        }

        #wordInput {
            flex: 1;
            padding: 15px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--border);
            border-radius: 12px;
            color: #fff;
            font-size: 1.1rem;
            outline: none;
        }

        #sendBtn {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            border: none;
            background: var(--primary);
            color: #fff;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            transition: all 0.2s;
        }

        #sendBtn:hover {
            transform: scale(1.05);
            background: var(--success);
        }

        .game-status {
            text-align: center;
            padding: 10px;
            font-size: 0.9rem;
            color: var(--success);
            font-weight: 600;
        }

        .btn-home {
            text-align: center;
            padding: 20px;
            color: rgba(255, 255, 255, 0.5);
            text-decoration: none;
        }
    </style>
</head>

<body>
    <div class="game-header">
        <h1>N·ªêI CH·ªÆ</h1>
        <p style="color: rgba(255,255,255,0.6)">B·∫Øt ƒë·∫ßu b·∫±ng m·ªôt t·ª´ c√≥ 2 ch·ªØ!</p>
    </div>

    <div class="chat-container">
        <div class="game-status" id="status">L∆∞·ª£t c·ªßa b·∫°n!</div>
        <div class="messages" id="messages">
            <div class="message ai">Ch√†o b·∫°n! H√£y b·∫Øt ƒë·∫ßu tr√≤ ch∆°i n·ªëi ch·ªØ. B·∫°n ƒëi tr∆∞·ªõc nh√©!</div>
        </div>
        <div class="input-area">
            <input type="text" id="wordInput" placeholder="V√≠ d·ª•: C√¥ng vi√™n" autocomplete="off">
            <button id="sendBtn" onclick="handleSend()"><i class="fas fa-paper-plane"></i></button>
        </div>
    </div>

    <a href="index.html" class="btn-home">
        <i class="fas fa-arrow-left"></i> QUAY L·∫†I TRANG CH·ª¶
    </a>

    <script>
        const messagesEl = document.getElementById('messages');
        const wordInput = document.getElementById('wordInput');
        const statusEl = document.getElementById('status');

        let lastWord = "";
        let usedWords = [];

        // Simple AI vocabulary for Vietnamese word linking
        const aiVocab = {
            "h·ªçc": ["h·ªçc sinh", "h·ªçc t·∫≠p", "h·ªçc h·ªèi", "h·ªçc ƒë∆∞·ªùng"],
            "sinh": ["sinh vi√™n", "sinh nh·∫≠t", "sinh s·ªëng", "sinh h·ªçc"],
            "h·∫°nh": ["h·∫°nh ph√∫c", "h·∫°nh ki·ªÉm"],
            "ph√∫c": ["ph√∫c ƒë·ª©c", "ph√∫c l·ª£i"],
            "t·∫≠p": ["t·∫≠p l√†m", "t·∫≠p vi·∫øt", "t·∫≠p duy·ªát"],
            "vi·∫øt": ["vi·∫øt l√°ch", "vi·∫øt b√†i"],
            "b√†i": ["b√†i h√°t", "b√†i to√°n", "b√†i v·ªü"],
            "h√°t": ["h√°t h√≤", "h√°t hay"],
            "c√¥ng": ["c√¥ng vi√™n", "c√¥ng ngh·ªá", "c√¥ng ty"],
            "vi√™n": ["vi√™n g·∫°ch", "vi√™n ƒë√°", "vi√™n ph·∫•n"],
            "ty": ["ty t·ª∑"],
            "ngh·ªá": ["ngh·ªá thu·∫≠t", "ngh·ªá sƒ©"],
            "thu·∫≠t": ["thu·∫≠t to√°n", "thu·∫≠t ng·ªØ"],
            "ƒë∆∞·ªùng": ["ƒë∆∞·ªùng ph·ªë", "ƒë∆∞·ªùng ray", "ƒë∆∞·ªùng x√°"],
            "ph·ªë": ["ph·ªë x√°", "ph·ªë ph∆∞·ªùng"],
            "x√°": ["x√° l·ª£i", "x√° t·ªôi"],
            "qu·∫ßn": ["qu·∫ßn √°o", "qu·∫ßn ƒë√πi", "qu·∫ßn v·ª£t"],
            "√°o": ["√°o d√†i", "√°o len", "√°o kho√°c"],
            "d√†i": ["d√†i d·∫±ng", "d√†i l√¢u"],
            "l√¢u": ["l√¢u ƒë√†i", "l√¢u nƒÉm"],
            "ƒë√†i": ["ƒë√†i ph√°t thanh", "ƒë√†i truy·ªÅn h√¨nh"],
            "tr·∫≠n": ["tr·∫≠n ƒë·∫•u", "tr·∫≠n m·∫°c"],
            "ƒë·∫•u": ["ƒë·∫•u tranh", "ƒë·∫•u th·∫ßu"],
            "th·∫ßu": ["th·∫ßu d·∫ßu"],
            "nh√†": ["nh√† ·ªü", "nh√† c·ª≠a", "nh√† b√°o"],
            "c·ª≠a": ["c·ª≠a s·ªï", "c·ª≠a h√†ng"],
            "s·ªï": ["s·ªï s√°ch", "s·ªï tay"],
            "s√°ch": ["s√°ch gi√°o khoa", "s√°ch v·ªü"],
            "v·ªü": ["v·ªü k·ªãch", "v·ªü s·∫°ch"],
            "h·ªçc": ["h·ªçc ƒë∆∞·ªùng"]
        };

        function addMessage(text, sender) {
            const msg = document.createElement('div');
            msg.className = `message ${sender}`;
            msg.textContent = text;
            messagesEl.appendChild(msg);
            messagesEl.scrollTop = messagesEl.scrollHeight;
        }

        function handleSend() {
            const input = wordInput.value.trim().toLowerCase();
            if (!input) return;

            const parts = input.split(' ');
            if (parts.length < 2) {
                alert("Vui l√≤ng nh·∫≠p c·ª•m t·ª´ c√≥ √≠t nh·∫•t 2 ch·ªØ!");
                return;
            }

            // Check rule
            if (lastWord && parts[0] !== lastWord) {
                alert(`T·ª´ c·ªßa b·∫°n ph·∫£i b·∫Øt ƒë·∫ßu b·∫±ng ch·ªØ "${lastWord}"!`);
                return;
            }

            if (usedWords.includes(input)) {
                alert("T·ª´ n√†y ƒë√£ ƒë∆∞·ª£c s·ª≠ d·ª•ng r·ªìi!");
                return;
            }

            addMessage(input, 'user');
            usedWords.push(input);
            lastWord = parts[parts.length - 1];
            wordInput.value = "";
            statusEl.textContent = "AI ƒëang suy nghƒ©...";

            setTimeout(() => {
                aiRespond(lastWord);
            }, 800);
        }

        function aiRespond(key) {
            let possibleAnswers = aiVocab[key] || [];

            // Filter out used words
            possibleAnswers = possibleAnswers.filter(w => !usedWords.includes(w));

            if (possibleAnswers.length > 0) {
                const response = possibleAnswers[Math.floor(Math.random() * possibleAnswers.length)];
                addMessage(response, 'ai');
                usedWords.push(response);
                const resParts = response.split(' ');
                lastWord = resParts[resParts.length - 1];
                statusEl.textContent = "L∆∞·ª£t c·ªßa b·∫°n!";
            } else {
                // If no vocab matches, AI might try to generate something or concede
                // For simplicity, let's say AI can connect to many common words
                addMessage(`T√¥i ch·ªãu thua r·ªìi! B·∫°n gi·ªèi qu√°. Ch·ªØ "${key}" kh√≥ th·∫≠t.`, 'ai');
                statusEl.textContent = "B·∫†N ƒê√É CHI·∫æN TH·∫ÆNG! üéâ";
                wordInput.disabled = true;
            }
        }

        wordInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') handleSend();
        });
    </script>
</body>

</html>